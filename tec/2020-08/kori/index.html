<!doctype html><html class=no-js><head><base href=https://blog.acdzh.ltd/><script></script><title>å®ç°ä¸€ä¸ªç®€å•çš„è·¯ç”±åŒ¹é…ç»„ä»¶ - Kori - ä¸²ä¸²çš„æ‚ä¸ƒæ‚å…«</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=description content="é¡¹ç›®åœ°å€: Github é¢„æœŸ å‰äº›å¤©åœ¨åšä¸€ä¸ª mock ç»„ä»¶, éœ€è¦å¯¹ä¸€äº›å‡½æ•°åƒæŒ‰ç…§è·¯ç”±è¿›è¡Œè°ƒç”¨, å¤§æ¦‚åƒä¸‹é¢è¿™æ ·: // register router.get('/user/id/:id/', ({id}) => { console.log(id); }); router.post('/test/', () => { console.log('this is a test'); }); // use router.handle('https://www.example.com/user/id/123456/'); é¢„æœŸä»…ä»…ä½¿ç”¨"><meta name=author content="acdzh"><meta name=theme-color content="#c26d46"><meta name=publisher content="acdzh"><meta name=generator content="http://gohugo.io/"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><meta http-equiv=content-language content="zh-cn"><meta itemprop=name content="å®ç°ä¸€ä¸ªç®€å•çš„è·¯ç”±åŒ¹é…ç»„ä»¶ - Kori - ä¸²ä¸²çš„æ‚ä¸ƒæ‚å…«"><meta itemprop=description content="é¡¹ç›®åœ°å€: Github é¢„æœŸ å‰äº›å¤©åœ¨åšä¸€ä¸ª mock ç»„ä»¶, éœ€è¦å¯¹ä¸€äº›å‡½æ•°åƒæŒ‰ç…§è·¯ç”±è¿›è¡Œè°ƒç”¨, å¤§æ¦‚åƒä¸‹é¢è¿™æ ·: // register router.get('/user/id/:id/', ({id}) => { console.log(id); }); router.post('/test/', () => { console.log('this is a test'); }); // use router.handle('https://www.example.com/user/id/123456/'); é¢„æœŸä»…ä»…ä½¿ç”¨"><meta itemprop=image content="https://blog.acdzh.ltd/public/icons/png/avatar_512x512.png"><meta property="og:title" content="å®ç°ä¸€ä¸ªç®€å•çš„è·¯ç”±åŒ¹é…ç»„ä»¶ - Kori - ä¸²ä¸²çš„æ‚ä¸ƒæ‚å…«"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.acdzh.ltd/tec/2020-08/kori/"><meta property="og:image" content="https://blog.acdzh.ltd/public/icons/png/avatar_512x512.png"><meta property="og:description" content="é¡¹ç›®åœ°å€: Github é¢„æœŸ å‰äº›å¤©åœ¨åšä¸€ä¸ª mock ç»„ä»¶, éœ€è¦å¯¹ä¸€äº›å‡½æ•°åƒæŒ‰ç…§è·¯ç”±è¿›è¡Œè°ƒç”¨, å¤§æ¦‚åƒä¸‹é¢è¿™æ ·: // register router.get('/user/id/:id/', ({id}) => { console.log(id); }); router.post('/test/', () => { console.log('this is a test'); }); // use router.handle('https://www.example.com/user/id/123456/'); é¢„æœŸä»…ä»…ä½¿ç”¨"><meta name=twitter:card content="summary"><meta name=twitter:site content="@acdzh"><meta name=twitter:title content="å®ç°ä¸€ä¸ªç®€å•çš„è·¯ç”±åŒ¹é…ç»„ä»¶ - Kori - ä¸²ä¸²çš„æ‚ä¸ƒæ‚å…«"><meta name=twitter:description content="é¡¹ç›®åœ°å€: Github é¢„æœŸ å‰äº›å¤©åœ¨åšä¸€ä¸ª mock ç»„ä»¶, éœ€è¦å¯¹ä¸€äº›å‡½æ•°åƒæŒ‰ç…§è·¯ç”±è¿›è¡Œè°ƒç”¨, å¤§æ¦‚åƒä¸‹é¢è¿™æ ·: // register router.get('/user/id/:id/', ({id}) => { console.log(id); }); router.post('/test/', () => { console.log('this is a test'); }); // use router.handle('https://www.example.com/user/id/123456/'); é¢„æœŸä»…ä»…ä½¿ç”¨"><meta name=twitter:creator content="@acdzh"><meta name=twitter:image content="https://blog.acdzh.ltd/public/icons/png/avatar_512x512.png"><script>document.documentElement.className=document.documentElement.className.replace("no-js","js");</script><link rel=canonical href=https://blog.acdzh.ltd/tec/2020-08/kori/><link rel=shortlink href=https://blog.acdzh.ltd/tec/2020-08/kori/><link type=image/x-icon rel="shortcut icon" href=https://blog.acdzh.ltd/public/icons/png/avatar_64x64.png><script data-ad-client=ca-pub-7980517780099899 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><link rel=stylesheet id=human-style-css href=https://blog.acdzh.ltd/wp-content/themes/hueman/style.css type=text/css media=all><link rel=stylesheet id=responsive-css href=https://blog.acdzh.ltd/wp-content/themes/hueman/responsive.css type=text/css media=all><link rel=stylesheet id=human-style-css2 href=https://blog.acdzh.ltd/wp-content/themes/hueman-child/style.css type=text/css media=all><link rel=stylesheet id=human-style-css3 href=https://blog.acdzh.ltd/wp-content/themes/hueman-child/user.css type=text/css media=all><link href=https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/styles/github.min.css rel=stylesheet><script src=https://cdn.bootcdn.net/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><style>.blob-num,.hljs-toolbox{color:rgba(27,31,35,.3)}</style><script src=https://cdn.bootcdn.net/ajax/libs/viz.js/2.1.2/viz.js></script><script src=https://cdn.bootcdn.net/ajax/libs/viz.js/2.1.2/lite.render.js></script><script>document.addEventListener("DOMContentLoaded",function(){var viz=new Viz();[...document.getElementsByClassName('dot')].forEach(function(ele){viz.renderString(ele.innerText).then(svg=>{ele.innerHTML=svg;ele.classList.remove('hidden');}).catch(()=>{ele.innerHTML=`<span style="color: #aaa; font-size: 14px;"> dot æ¸²æŸ“å¤±è´¥:</span><br><pre style="margin-top: 0;"><code class="language-dot hljs">${ele.innerHTML}</code></pre>`;ele.classList.remove('hidden');});});});</script><link href=https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.0/css/all.min.css rel=stylesheet><link rel=stylesheet href=public/font/hack/css/hack.min.css><link rel=stylesheet href="https://fonts.loli.net/css2?family=Fira+Code&display=swap"><script src=https://cdn.bootcdn.net/ajax/libs/jquery/3.5.0/jquery.min.js></script><script src=https://cdn.bootcdn.net/ajax/libs/jquery.matchHeight/0.7.2/jquery.matchHeight-min.js></script><script src=https://cdn.bootcdn.net/ajax/libs/picturefill/3.0.3/picturefill.min.js></script><script type=text/javascript src=wp-content/themes/hueman/js/scripts.js></script><link rel=stylesheet id=custom-css href=assets/css/custom.css type=text/css media=all><script type=text/javascript async defer src=assets/js/myblog.js></script><script>if('serviceWorker'in navigator){navigator.serviceWorker.register('/assets/js/service-worker.js');}</script><link rel=manifest href=https://blog.acdzh.ltd/app.webmanifest><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-148601605-2','auto');ga('send','pageview');}</script></head><body class="single single-post single-format-standard col-3cm full-width topbar-enabled chrome"><div id=wrapper><header id=header><nav class="nav-container group" id=nav-topbar><div class=nav-toggle><i class="fas fa-bars"></i></div><div class=nav-text></div><div class="nav-wrap container"><a rel=nofollow href=https://blog.acdzh.ltd/ class=nav-cs-icon><img width=40 height=40 src=https://blog.acdzh.ltd/public/icons/png/avatar_512x512.png alt=acdzh title=Home></a><ul id=menu-default-menu class="nav container-inner group"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a rel=nofollow href=https://blog.acdzh.ltd/><i class="fas fa-home"></i>&nbsp;&nbsp;é¦–é¡µ</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E6%8A%80%E6%9C%AF/><i class="fas fa-gavel"></i>&nbsp;&nbsp;æŠ€æœ¯</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E9%97%B2%E8%AF%9D/><i class="fas fa-comment"></i>&nbsp;&nbsp;é—²è¯</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a rel=nofollow href=https://blog.acdzh.ltd/others><i class="fas fa-tools"></i>&nbsp;&nbsp;å…¶å®ƒ</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a rel=nofollow href=https://blog.acdzh.ltd/post><i class="fas fa-archive"></i>&nbsp;&nbsp;å½’æ¡£</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a rel=nofollow href=https://blog.acdzh.ltd/about><i class="fas fa-user"></i>&nbsp;&nbsp;å…³äºæˆ‘</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"></li><li class="menu-item menu-item-type-post_type menu-item-text">---0-0-0---</li></ul></div><div class=container><div class=container-inner><div class=toggle-search><i class="fas fa-search"></i></div><div class=search-expand><div class=search-expand-inner><form method=get class="searchform themeform" action=https://www.google.com/search><div><input type=text class=search name=q placeholder="Press enter to start searching"></div></form></div></div></div></div></nav><div class="container group"><div class=container-inner><div class="group pad"><div class="group pad"></div><h1 class=site-title><a rel=nofollow href=https://blog.acdzh.ltd rel=home><img id=title-avatar-img alt=acdzh src=https://blog.acdzh.ltd/public/icons/png/avatar_mask_512x512.png></img>
<span>ä¸²ä¸²çš„æ‚ä¸ƒæ‚å…«</span></a></h1><p class=site-description></p></div></div></div></div></header><div class=container id=page><div class=container-inner><div class=main><div class="main-inner group"><section class=content><div class="page-title pad group"><ul class="meta-single group"><div><li class=category><a href=https://blog.acdzh.ltd/categories/%E6%8A%80%E6%9C%AF/ rel="series category tag">æŠ€æœ¯</a></li><li class=category><a href=https://blog.acdzh.ltd/categories/%E7%AE%97%E6%B3%95/ rel="series category tag">ç®—æ³•</a></li><li class=category><a href=https://blog.acdzh.ltd/categories/%E5%89%8D%E7%AB%AF/ rel="series category tag">å‰ç«¯</a></li><li class=category><a href=https://blog.acdzh.ltd/categories/JavaScript/ rel="series category tag">JavaScript</a></li></div><div style=float:right></div><div></div></ul></div><div class="pad group"><article class="post type-post status-publish format-standard has-post-thumbnail hentry category-australien tag-bondi-beach tag-city2surf tag-sydney"><div class="post-inner group"><h1 class=post-title>å®ç°ä¸€ä¸ªç®€å•çš„è·¯ç”±åŒ¹é…ç»„ä»¶ - Kori</h1><p class=post-byline>By
acdzh
Â·
2020å¹´08æœˆ12æ—¥ 17:41 Â·
1917 Words Â·
~4min reading time
Â·
<span id=/tec/2020-08/kori/ class=leancloud_visitors data-flag-title="å®ç°ä¸€ä¸ªç®€å•çš„è·¯ç”±åŒ¹é…ç»„ä»¶ - Kori"><span class=leancloud-visitors-count></span></span>Visitors
|
<a href=https://github.com/acdzh/hugo-blog-src/blob/master/content/tec/2020-08/12-%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%e8%b7%af%e7%94%b1%e5%8c%b9%e9%85%8d%e7%bb%84%e4%bb%b6.md target=_blank style=text-decoration:none>Raw on <i class="fab fa-github"></i></a></p><div class=clear></div><div class=entry><div class=entry-inner><p><a href=https://www.npmjs.com/package/kori><img src=https://badgen.net/npm/v/kori alt="kori @ npm"></a></p><p>é¡¹ç›®åœ°å€: <a href=https://github.com/acdzh/kori>Github</a></p><h2 id=é¢„æœŸ>é¢„æœŸ</h2><p>å‰äº›å¤©åœ¨åšä¸€ä¸ª mock ç»„ä»¶, éœ€è¦å¯¹ä¸€äº›å‡½æ•°åƒæŒ‰ç…§è·¯ç”±è¿›è¡Œè°ƒç”¨, å¤§æ¦‚åƒä¸‹é¢è¿™æ ·:</p><pre><code class=language-javascript>// register
router.get('/user/id/:id/', ({id}) =&gt; {
  console.log(id);
});

router.post('/test/', () =&gt; {
  console.log('this is a test');
});

// use
router.handle('https://www.example.com/user/id/123456/');
</code></pre><p>é¢„æœŸä»…ä»…ä½¿ç”¨è·¯ç”±ç»„ä»¶çš„æ ¸å¿ƒéƒ¨åˆ†åŠŸèƒ½ - è·¯ç”±åˆ†é…ç®—æ³•. ä½†æ˜¯é—®é¢˜æ˜¯ç°åœ¨çš„è·¯ç”±ç»„ä»¶è¦ä¹ˆå’Œ http è€¦åˆèµ·æ¥è¦ä¹ˆå’Œç»„ä»¶è€¦åˆèµ·æ¥, æ‰¾äº†ä¸€å¤©è¿˜æ˜¯æ‰“ç®—è‡ªå·±é€ ä¸ªè½®å­å‡ºæ¥ç®—äº† (å…¶å®å°±æ˜¯æ‡’å¾—æ‰¾)</p><p>ä¸€æ™šä¸Šç³Šäº†ä¸ªåº“å‡ºæ¥ (</p><h2 id=åŸç†>åŸç†</h2><p>æœ‰å‡ ç§å¸¸è§çš„åŒ¹é…è·¯ç”±çš„æ–¹å¼, ç¬¬ä¸€ç§ä¸€ç§æ˜¯ç®€å•çš„å­—å…¸åŒ¹é…, è¿™ç§æ–¹å¼æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•, æŠŠè¦æ³¨å†Œçš„è·¯ç”±æŒ¨ä¸ªåœ¨å­—å…¸ä¸­æ³¨å†Œä¸€ä¸‹å°±å®Œæˆäº†. ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿæœ‰ç¼ºç‚¹, å°±æ˜¯ä¸çµæ´». åƒä¸Šé¢ä¾‹å­ä¸­çš„ <code>id</code> åŒ¹é…å°±å¾ˆéš¾åšåˆ°. å¦å¤–ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æ­£åˆ™åŒ¹é…, <code>React-Router</code> å°±æ˜¯è¿™ç§æ–¹å¼, è¿™é‡Œå…ˆä¸è®¨è®º.</p><p>è¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨å‰ç¼€æ ‘ç®—æ³•.</p><h2 id=å‰ç¼€æ ‘-trie-ç®—æ³•>å‰ç¼€æ ‘ (Trie) ç®—æ³•</h2><p>å‰ç¼€æ ‘æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª DFA, è¿™æ˜¯ä¸€ä¸ªå‰ç¼€æ ‘çš„ä¾‹å­:</p><blockquote><p>ä½¿ç”¨ apple, by, bye, byte, bytedance æ„é€ ä¸€æ£µå‰ç¼€æ ‘.</p></blockquote><div class="dot hidden">digraph G {
rankdir=LR;
start -> a0 -> p0 -> p1 -> l0 -> e0 -> end0;
e1 -> end1;
y0 -> end2;
start -> b0 -> y0 -> t0 -> e1 -> d0 -> a1 -> n0 -> c0 -> e2 -> end3;
y0 -> e3 -> end4;
a0[label="a"];
a1[label="a"];
b0[label="b"];
c0[label="c"];
d0[label="d"];
e0[label="e"];
e1[label="e"];
e2[label="e"];
e3[label="e"];
n0[label="n"];
p0[label="p"];
p1[label="p"];
l0[label="l"];
t0[label="t"];
y0[label="y"];
end0[label="end"];
end1[label="end"];
end2[label="end"];
end3[label="end"];
end4[label="end"];
}</div><p>æˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°å®ç°è¿™æ£µæ ‘.</p><h2 id=å®ç°>å®ç°</h2><h3 id=node>Node</h3><p>ä¸ä¸Šé¢çš„ç¤ºä¾‹ä¸åŒ, æˆ‘ä»¬ç”¨ä¸€ä¸ªèŠ‚ç‚¹ (Node) æ¥è¡¨ç¤ºä¸€ä¸ªå•è¯ (word), è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦.</p><pre><code class=language-javascript>/**
* The trie's node
*
* @constructor
* @param {String} word this part of path.
* @param {Boolean} [isWild = false] if is wild, eg. app/user/{id}.
*/
function Node(word, isWild = false) {
  this.word = word;
  this.isWild = isWild;
  this.children = [];
  this.father = null;
  this.canEnd = false;
  this.callback = null;
}
</code></pre><p>ä¸€ä¸ªèŠ‚ç‚¹æœ‰ä¸‹é¢å‡ ä¸ªå±æ€§:</p><p><strong>word:</strong> è®°å½•è¿™ä¸ªèŠ‚ç‚¹æ‰€ä»£è¡¨çš„è¯;</p><p><strong>isWild:</strong> æ˜¯å¦æ˜¯é€šé…ç¬¦. ä¾‹å¦‚è¿™ä¸ªèŠ‚ç‚¹æ˜¯ç”± <code>{id}</code> æ„é€ çš„, <code>isWild === true</code>, å¦åˆ™ <code>isWild === false</code>;</p><p><strong>children:</strong> å­©å­ç»“ç‚¹;</p><p><strong>father:</strong> çˆ¶äº²ç»“ç‚¹. å®é™…ä¸Šæœ¬æ¥æ˜¯æ²¡æœ‰å¿…è¦åœ¨æœ‰å­©å­ç»“ç‚¹å±æ€§çš„æƒ…å†µä¸‹å†åŠ ä¸Šä¸€ä¸ªçˆ¶äº²ç»“ç‚¹å±æ€§, ä½†æ˜¯åé¢ä¼šç”¨åˆ°å›æº¯, å¯ä»¥æ›´æ–¹ä¾¿ä¸€äº›;</p><p><strong>canEnd:</strong> æ˜¯å¦å¯ä»¥ç»“æŸ;</p><p><strong>callback:</strong> åœ¨å½“å‰ä½ç½®ç»“æŸçš„å›è°ƒå‡½æ•°;</p><p>å¦å¤–è¿˜æœ‰ä»¥ä¸‹æ–¹æ³•:</p><pre><code class=language-javascript>Node.prototype.equals = function(node) {
  return (
    this.word === node.word this.isWild === node.isWild
  );
};


Node.prototype.match = function(word) {
  if (this.word === '*') return true;
  if (this.isWild) return true;
  if (this.word === word) return true;
  return false;
};


Node.prototype.getUrl = function() {
  const getPart =  ({ word, isWild }) =&gt; isWild ? `{${word}}` : word;
  let url = this.isWild ? getPart(this) : this.word;
  let node = this.father;
  while (node) {
    url = `${getPart(node)}/${url}`;
    node = node.father;
  }
  return url;
};


Node.prototype.debug = function(depth = 0) {
  const part = `${this.isWild ? '\{' : ''}${this.word}${this.isWild ? '\}' : ''}`;
  if (depth === 0) {
    console.log(` â”Œ  ${part}`);
  } else {
    const blank = [...new Array(depth)].map(() =&gt; ' â”‚ ').join('').slice(0, -2) + 'â”œâ”€ ';
    console.log(blank + part);
  }
  for (let i = 0; i &lt; this.children.length; i++) {
    this.children[i].debug(depth + 1);
  }
};
</code></pre><p>è¿™äº›æ–¹æ³•çš„ä½œç”¨æ˜¾è€Œæ˜“è§, ä¸å†èµ˜è¿°.</p><h3 id=trie>Trie</h3><pre><code class=language-javascript>function Trie() {
  this.root = new Node('', false);
}
</code></pre><p>Trie åªæœ‰ä¸€ä¸ªè®°å½•æ ¹ç»“ç‚¹çš„å±æ€§. å…¶é‡è¦éƒ¨åˆ†åœ¨äºå…¶æ–¹æ³•.</p><p>æˆ‘ä»¬éœ€è¦ä¸º Trie å®ç°ä¸¤ä¸ªæ–¹æ³•, <code>addRouter</code> å’Œ <code>getRouter</code>, åˆ†åˆ«ä¸ºæ·»åŠ è·¯ç”±å’Œè·å–è·¯ç”±. å‰è€…ç”¨äºå¾€å‰ç¼€æ ‘ä¸­æ·»åŠ ä¸€æ¡æ–°çš„è·¯ç”±, åè€…ç”¨äºä½¿ç”¨ url å°è¯•åœ¨å‰ç¼€æ ‘ä¸­è¿›è¡ŒåŒ¹é….</p><h4 id=addrouter>addRouter</h4><pre><code class=language-javascript>/**
* add a path to this trie.
*
* @param {String} path if it doesn't start with '/', it will be added a '/'.
* @param {Function} callback callback function.
*/
Trie.prototype.addRouter = function(path, callback) {
  // ...
};
</code></pre><p>æ·»åŠ è·¯ç”±ç›¸å¯¹ç®€å•ä¸€äº›. é¦–å…ˆæˆ‘ä»¬å¯¹ä¼ è¿›æ¥çš„ path è¿›è¡Œæ ¼å¼åŒ–å¹¶åšä¸€äº›å¿…è¦çš„å‡†å¤‡å·¥ä½œ:</p><pre><code class=language-javascript>if (path[0] === '/') {
  path = path.slice(1);
};
const parts = path.split('/');
const partsLength = parts.length;

let currentNode = this.root;
</code></pre><p>ä¹‹åå°† path æŒ‰ <code>/</code> åˆ†å‰², åœ¨å·²æœ‰çš„æ ‘ä¸Šè¿›è¡Œå¯»æ‰¾, å¦‚æœåŒ¹é…åˆ°ç»“ç‚¹å°±å‰è¿›åˆ°è¯¥ç»“ç‚¹, å¦åˆ™å°±æ–°å»ºä¸€ä¸ªå­ç»“ç‚¹, å†å‰è¿›åˆ°è¯¥å­ç»“ç‚¹ä¸Š. æœ€ååœ¨æœ€åä¸€ä¸ªç»“ç‚¹ä¸ŠæŒ‚ä¸Šæˆ‘ä»¬ä¼ å…¥çš„å›è°ƒå‡½æ•°å³å¯.</p><p>å¦å¤–è¿˜éœ€è¦ç¨å¾®æ³¨æ„ä¸€ä¸‹ <code>{word}</code> å’Œ <code>*</code>.</p><pre><code class=language-javascript>for (let i = 0; i &lt; parts.length; i++) {
    let word = parts[i];
    let isEnd = i === partsLength - 1 || word === '*';
    let length = word.length;
    let isWild = false;
    
    if (length &gt; 1 &amp;&amp; word[0] === '{' &amp;&amp; word[length - 1] === '}') {
      isWild = true;
      word = word.slice(1, length - 1);
    }
    let tempNode = new Node(word, isWild);

    const foundNode = currentNode.children.find(node =&gt; node.equals(tempNode));

    if (foundNode) {
      if (isEnd) {
        foundNode.callback = callback;
        foundNode.canEnd = true;
      } else {
        currentNode = foundNode;
      }
    } else {
      if (isEnd) {
        tempNode.callback = callback;
        tempNode.canEnd = true;
      }
      currentNode.children.push(tempNode);
      tempNode.father = currentNode;
      currentNode = tempNode;
    }

    if (isEnd) break;
  }
</code></pre><h4 id=getrouter>getRouter</h4><p>è·å–è·¯ç”±çš„ç®—æ³•å’Œæ’å…¥è·¯ç”±åŸºæœ¬ä¸Šæ˜¯ä¸€è‡´çš„. ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯, å› ä¸ºæˆ‘ä»¬æœ‰é€šé…ç¬¦ <code>*</code> çš„å­˜åœ¨, æ‰€ä»¥åœ¨åŒ¹é…å¤±è´¥æ—¶ä¸èƒ½ç›´æ¥é€€å‡º, è€Œæ˜¯åº”è¯¥è¿›è¡Œå›æº¯, å»éªŒè¯ä¹‹å‰æœ‰æ²¡æœ‰å‡ºç°è¿‡ <code>*</code>. å¦‚æœä¹‹å‰æ²¡æœ‰å‡ºç°è¿‡ <code>*</code> çš„è¯, è¿™æ—¶æ‰èƒ½è®¤å®šä¸ºåŒ¹é…æ˜¯å¤±è´¥çš„.</p><p>ä¸ºä»€ä¹ˆä¸åœ¨ç¬¬ä¸€æ¬¡é‡åˆ° <code>*</code> å°±æˆåŠŸè¿”å›å‘¢? è€ƒè™‘ä»¥ä¸‹æƒ…å†µ: æˆ‘ä»¬çš„è·¯ç”±æ˜¯ <code>/a/*, /a/b/c/d</code>, æˆ‘ä»¬ä¼ å…¥çš„ url æ˜¯ <code>/a/b/c/f</code>. åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡é‡åˆ° <code>*</code>æ—¶, å®é™…ä¸Šå¹¶ä¸èƒ½ç¡®å®šé™¤äº†è¿™æ¡è·¯ç”±ä¹‹å¤–, å…¶ä»–è·¯ç”±å°±ä¸€å®šä¸åŒ¹é…. æˆ‘ä»¬çš„åŸåˆ™æ˜¯åŒ¹é…æœ€æ·±çš„è·¯ç”±ä¼˜å…ˆ, è€Œä¸æ˜¯åƒ Gin ä¸€æ ·ä¸€æ¡é•¿è·¯ç”±å°±ç›´æ¥é˜»æ–­å…¶ä»–çš„çŸ­è·¯ç”±. (åœ¨ Gin ä¸­æ— æ³•åƒ express ä¸€æ ·åŒæ—¶å®šä¹‰ <code>/app/static</code> å’Œ <code>/app/*</code> ä¸¤æ¡è·¯ç”±, å—¯, è¿™éå¸¸åäººç±» (x</p><p>å› æ­¤æŸ¥æ‰¾éƒ¨åˆ†å®ç°å¦‚ä¸‹:</p><pre><code class=language-javascript>for (let i = 0; i &lt; parts.length; i++) {
  let word = parts[i];
  const matchNode = currentNode.children.find(node =&gt; node.word !== '*' &amp;&amp; node.match(word));

  if (matchNode) {
    haveMatched = true;
    if (matchNode.isWild) {
      keys[matchNode.word] = word;
    }
    currentNode = matchNode;
  } else {
    const starNode = currentNode.children.find(node =&gt; node.word === '*');
    if (starNode) {
      return {
        node: starNode,
        keys,
        splat: parts.slice(i).join('/'),
      };
    }
    // looc back for '*'
    for (let j = i - 1; j &gt;= 0; j--) {
      currentNode = currentNode.father;
      const starNode = currentNode.children.find(node =&gt; node.word === '*');
      if (starNode) {
        return {
          node: starNode,
          keys,
          splat: parts.slice(j).join('/'),
        };
      }
    }
    return nullResult;
  }
}
</code></pre><h3 id=kori>Kori</h3><p>å†ä¹‹åå°±æ˜¯å®ç° Kori çš„æ–¹æ³•äº†. å®é™…ä¸Š Kori åªæ˜¯å¯¹ <code>['get', 'post', ...]</code> ç­‰æ–¹æ³•åˆ†åˆ«å»ºäº†ä¸€é¢—å‰ç¼€æ ‘. åŒæ—¶åœ¨åŠ ä¸Šä¸€äº›æ ¼å¼åŒ–çš„ä»£ç å°± ğŸ‘Œ äº†.</p><pre><code class=language-javascript>var qs = require('qs');
var parse = require('url-parse');
var Trie = require('./trie');

const methods = [
  'get', 'post', 'put', 'head', 'delete',
  'options', 'trace', 'copy', 'lock', 'mkcol',
  'move', 'purge', 'propfind', 'proppatch', 'unlock',
  'report', 'mkactivity', 'checkout', 'merge', 'm-search',
  'notify', 'subscribe', 'unsubscribe', 'patch', 'search', 'connect',
];

/**
*
* @constructor
*/
function Kori(base) {
  this.methods = Object.create(null);
}

/**
* set a route, support chain call.
*
* @param {String} path
* @param {String} method case insensitiveã€‚
* @param {Function} callback callback function.
*/
Kori.prototype._setRouter = function(path, method, callback) {
  if(!this.methods[method]) this.methods[method] = new Trie();
  this.methods[method].addRouter(path, callback);
  return this;
};

/**
* handle a function request
*
* @param {String} path
* @param {String} method case insensitive.
* @param {Object[]} ...args transparent transmission parameters.
*/
Kori.prototype.handle = function(url, method, ...args) {
  const parsedUrl = parse(url);
  const {pathname: path, query} = parsedUrl;
  method = method.toLowerCase();

  const trie = this.methods[method];
  if (!trie) { 
    throw new Error('not match');
    return;
  }

  const result = trie.getRouter(path);
  if (!result.node) {
    throw new Error('not match');
    return;
  }

  const { node, keys, splat }= result;
  const callback = node.callback;
  return callback({
    url,
    path,
    match: node.getUrl(),
    keys, 
    splat, 
    query: qs.parse(query.slice(1)),
    method,
  }, ...args);
};

methods.forEach(method =&gt; {
  Kori.prototype[method] = function(path, callback) {
    return this._setRouter(path, method, callback);
  }
});
</code></pre><h2 id=å…¶ä»–>å…¶ä»–</h2><p>æœ¬æ¥è¿™é‡Œè¯¥æœ‰ä¸€äº›æ€§èƒ½æµ‹è¯•ä¹‹ç±»çš„ä¸œè¥¿, ä½†æ˜¯å¹¶æ²¡æœ‰ (x</p><h2 id=å†å²è®°å½•>å†å²è®°å½•</h2><table><thead><tr><th align=center>Version</th><th align=center>Action</th><th align=center>Time</th></tr></thead><tbody><tr><td align=center>1.0</td><td align=center>Init</td><td align=center>2020-08-12 17:41</td></tr></tbody></table></div><div style="border:1px dashed #e0e0e0;padding:10px;background-color:#fffeee;background-repeat:no-repeat;background-attachment:scroll;background-position:1%;border-radius:6px;-moz-background-size:auto auto;-moz-background-clip:-moz-initial;-moz-background-origin:-moz-initial;-moz-background-inline-policy:-moz-initial"><div><p style=margin-top:0>ä½œè€…ï¼š<a target=_blank href=https://blog.acdzh.ltd>acdzh</a><br>æœ¬æ–‡å‡ºå¤„ï¼š<a target=_blank href=https://blog.acdzh.ltd/tec/2020-08/kori/>https://blog.acdzh.ltd/tec/2020-08/kori/</a><br>äº’è”ç½‘æ—¥æ–°æœˆå¼‚ï¼Œè¯·æ³¨æ„æ–‡ç« æ—¶æ•ˆã€‚<br><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/><i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i><i class="fab fa-creative-commons-nc"></i><i class="fab fa-creative-commons-sa"></i></a>æœ¬ä½œå“é‡‡ç”¨ <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a> è¿›è¡Œè®¸å¯ã€‚æ–‡ç« ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œå…è®¸è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡é“¾æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚<br></p></div></div><div class=clear></div></div></div></article><div class=clear></div><p class=post-tags><i class="fas fa-folder-open"></i>&nbsp;
<a rel=category href=https://blog.acdzh.ltd/categories/%E6%8A%80%E6%9C%AF title="All posts in category æŠ€æœ¯">æŠ€æœ¯</a>
<a rel=category href=https://blog.acdzh.ltd/categories/%E7%AE%97%E6%B3%95 title="All posts in category ç®—æ³•">ç®—æ³•</a>
<a rel=category href=https://blog.acdzh.ltd/categories/%E5%89%8D%E7%AB%AF title="All posts in category å‰ç«¯">å‰ç«¯</a>
<a rel=category href=https://blog.acdzh.ltd/categories/JavaScript title="All posts in category JavaScript">JavaScript</a>
&nbsp;&nbsp;&nbsp;
<i class="fas fa-tags"></i>&nbsp;
<a rel=tag href=https://blog.acdzh.ltd/tags/JavaScript title="All post with tag JavaScript">JavaScript</a>
<a rel=tag href=https://blog.acdzh.ltd/tags/npm title="All post with tag npm">npm</a>
<a rel=tag href=https://blog.acdzh.ltd/tags/Kori title="All post with tag Kori">Kori</a></p><h4 class=heading><i class="fas fa-hand-point-right"></i>Related posts</h4><ul class="related-posts group"></ul><div id=valine_comments></div><script src=//unpkg.com/valine/dist/Valine.min.js></script><script>(function(){mapToObject=function(_this,func){const obj={};_this.forEach((item,index)=>{const result=func(item,index)||[];obj[result[0]]=result[1];});return obj;};const emojis={QQ:mapToObject(['aini','aixin','aoman','baiyan','bangbangtang','baojin','baoquan','bishi','bizui','cahan','caidao','chi','ciya','dabing','daku','dan','deyi','doge','fadai','fanu','fendou','ganga','gouyin','guzhang','haixiu','hanxiao','haobang','haqian','hecai','hexie','huaixiao','jie','jingkong','jingxi','jingya','juhua','keai','kelian','koubi','ku','kuaikule','kulou','kun','lanqiu','leiben','lenghan','liuhan','liulei','nanguo','OK','penxue','piezui','pijiu','qiang','qiaoda','qinqin','qiudale','quantou','saorao','se','shengli','shouqiang','shuai','shui','tiaopi','touxiao','tu','tuosai','weiqu','weixiao','woshou','wozuimei','wunai','xia','xiaojiujie','xiaoku','xiaoyanger','xieyanxiao','xigua','xu','yangtuo','yinxian','yiwen','youhengheng','youling','yun','zaijian','zhayanjian','zhemo','zhouma','zhuakuang','zuohengheng'],name=>[`qq_${name}`,`QQ/${name}.gif`]),'Tieba-New':mapToObject(['','10','100','101','102','103','104','105','106','107','108','109','11','110','111','112','113','114','115','116','117','118','119','12','120','121','122','123','124','13','14','15','16','17','18','19','2','20','21','22','23','24','25','26','27','28','29','3','30','31','32','33','34','35','36','37','38','39','4','40','41','42','43','44','45','46','47','48','49','5','50','6','66','67','68','69','7','70','71','72','73','74','75','76','77','78','79','8','80','81','82','83','84','85','86','87','88','89','9','90','91','92','93','94','95','96','97','98','99'],(name)=>[`tieba_${name}`,`Tieba-New/image_emoticon${name}.png`]),Coolapk:{...mapToObject(['100_qqdoge','1010','1011','1012','1013','1014','1015','1016','1017','1018','1019','101_pyjiaoyi','1020','1021','102_fadai','103_nb','104','105','106','107','108','109','10_aoman','11_yiwen','12_wuyu','13_huaixiao','14_bishi','15_fanu','16_tuosai','17_tushe','18_han','19_koubi','1_hahaha','20_qinqin','21_penxue','22_xiaoyan','23_shui','24_wuzuixiao','25_zaijian','26_kelian','27_qiang','28_ruo','29_baoquan','2_jingya','30_ok','31_xiaoku','32_heiha','33_wulian','34_jizhi','35_ye','36_ku','37_doge','38_wozuimei','39_caidao','3_ciya','40_aixin','41_meigui','42_diaoxie','43_heixian','44_pen','45_yinxian','46_nanguo','47_weiqu','48_weiweiyixiao','49_huanhu','4_liulei','50_xinsui','51_chigua','52_hejiu','53_pu','54_hongyaowan','55_lvyaowan','56_dogexiaoku','57_dogehechi','58_dogeyuanliangta','59_erha','5_keai','60_kuan','61_lvmao','62_huaji','63_liuhanhuaji','64_shounuehuaji','65_coshuaji','66_doujiyanhuaji','67_mojinghuaji','68','69','6_weixiao','70','71','72','73','74','75','76','77','78','79','7_hehe','80','81_naikezui','82_miaomiao','83_huoba','84_baiyan','85','86','87','88','89','8_piezui','90','91','92','93','94','95_erhading','96_kuanlvmao','97_haixiu','98_wunai','99_zhoumei','9_se'],name=>[`coolapk_${name.split('_')[0]}`,`Coolapk/coolapk_emotion_${name}.png`]),...mapToObject(['coolb','fived','fivef','fivem','fiveo','fivey','fy','oned','onef','onem','oneo','oney','oy','teny','twod','twof','twom','twoo','twoy','ty'],name=>[`coolapk_${name}`,`Coolapk/c_${name}.png`])},alu:mapToObject(['ä¸å‡ºæ‰€æ–™','ä¸è¯´è¯','ä¸é«˜å…´','ä¸­åˆ€','ä¸­æŒ‡','ä¸­æª','äº²äº²','ä¾¿ä¾¿','å†…ä¼¤','å‡»æŒ','å£æ°´','å','åèˆŒ','åè¡€å€’åœ°','å‘²ç‰™','å’½æ°”','å“­æ³£','å–œæè€Œæ³£','å–·æ°´','å–·è¡€','åç­‰','å®³ç¾','å°çœ¼ç›','å°´å°¬','å¾—æ„','æƒŠå–œ','æƒ³ä¸€æƒ³','æ„¤æ€’','æ‰‡è€³å…‰','æŠ•é™','æŠ é¼»','æŠ½çƒŸ','æ— å¥ˆ','æ— æ‰€è°“','æ— è¯­','æš—åœ°è§‚å¯Ÿ','æœŸå¾…','æ¬¢å‘¼','æ±—','æ·±æ€','ç‹‚æ±—','çŒ®èŠ±','çŒ®é»„ç“œ','çš±çœ‰','çœ‹ä¸è§','çœ‹çƒ­é—¹','ç…ä½ ','è‚¿åŒ…','è„¸çº¢','èœ¡çƒ›','è£…å¤§æ¬¾','è§‚å¯Ÿ','èµä¸€ä¸ª','é‚ªæ¶','é”çœ‰','é•¿è‰','é˜´æš—','é«˜å…´','é»‘çº¿','é¼“æŒ'],(name,index)=>[`alu_${name}`,`alu/${name}.png`]),weibo:mapToObject(['d_aoteman','d_baibai','d_baobao','d_beishang','d_bingbujiandan','d_bishi','d_bizui','d_chanzui','d_chigua','d_chijing','d_dahaqi','d_dalian','d_ding','d_doge','d_erha','d_feijie','d_feizao','d_ganmao','d_guile','d_guzhang','d_haha','d_haixiu','d_han','d_hehe','d_heiheihei','d_heixian','d_heng','d_huaixiao','d_huaxin','d_jiyan','d_keai','d_kelian','d_ku','d_kulou','d_kun','d_landelini','d_lang','d_lei','d_miao','d_nanhaier','d_nu','d_numa','d_nvhaier','d_qian','d_qinqin','d_shayan','d_shengbing','d_shenshou','d_shiwang','d_shuai','d_shuijiao','d_sikao','d_taikaixin','d_tanshou','d_tian','d_touxiao','d_tu','d_tuzi','d_wabishi','d_weiqu','d_wu','d_xiaoku','d_xingxingyan','d_xiongmao','d_xixi','d_xu','d_yinxian','d_yiwen','d_youhengheng','d_yun','d_yunbei','d_zhuakuang','d_zhutou','d_zuiyou','emoji_0x1f31f','emoji_0x1f349','emoji_0x1f357','emoji_0x1f384','emoji_0x1f44f','emoji_0x1f47b','emoji_0x1f47f','emoji_0x1f48a','emoji_0x1f4a3','emoji_0x1f4a9','emoji_0x1f631','emoji_0x1f643','emoji_0x1f645','emoji_0x1f648','emoji_0x1f649','emoji_0x1f64a','emoji_0x1f64b','emoji_0x1f64f','emoji_0x1f913','emoji_0x1f917','emoji_0x26a1','h_buyao','h_good','h_haha','h_jiayou','h_lai','h_ok','h_quantou','h_ruo','h_woshou','h_ye','h_zan','h_zuoyi'],name=>[`weibo_${name}`,`weibo/${name}.png`]),lengtu:mapToObject([...new Array(48)],(_,index)=>[`lengtu_${index+1}`,`lengtu/${(index+1).toString().padStart(2,"0")}.gif`]),bilibili_2233:mapToObject(['å–èŒ','åƒæƒŠ','åé­‚','å–æ°´','å›°æƒ‘','å¤§å“­','å¤§ç¬‘','å§”å±ˆ','æ€’','æ— è¨€','æ±—','ç–‘é—®','ç¬¬ä¸€','è€¶','éƒé—·'],(name,index)=>[`bili_2233_${name}`,`bilibili2233/[2233å¨˜_${name}].png`]),bilibili_hotkey:mapToObject([...new Array(32)],(_,index)=>[`bili_hotkey_${index+1}`,`bilibiliHotKey/${(index+1)}.jpg`]),bilibili_tv:mapToObject(['doge','äº²äº²','å·ç¬‘','å†è§','å†·æ¼ ','å‘æ€’','å‘è´¢','å¯çˆ±','åè¡€','å‘†','å‘•å','å›°','åç¬‘','å¤§ä½¬','å¤§å“­','å§”å±ˆ','å®³ç¾','å°´å°¬','å¾®ç¬‘','æ€è€ƒ','æƒŠå“','æ‰“è„¸','æŠ“ç‹‚','æŠ é¼»','æ–œçœ¼ç¬‘','æ— å¥ˆ','æ™•','æµæ±—','æµæ³ª','æµé¼»è¡€','ç‚¹èµ','ç”Ÿæ°”','ç”Ÿç—…','ç–‘é—®','ç™½çœ¼','çš±çœ‰','ç›®çªå£å‘†','ç¡ç€','ç¬‘å“­','è…¼è…†','è‰²','è°ƒä¾ƒ','è°ƒçš®','é„™è§†','é—­å˜´','éš¾è¿‡','é¦‹','é¬¼è„¸','é»‘äººé—®å·','é¼“æŒ'],(name,index)=>[`bili_tv_${name}`,`bilibilitv/[tv_${name}].png`]),aodamiao:mapToObject([...new Array(40)],(_,index)=>[`aodamiao_${index+1}`,`aodamiao/${(index+1).toString().padStart(2,"0")}.gif`]),'Cute-Emoji':mapToObject([...new Array(40)],(_,index)=>[`cute_emoji_${index+1}`,`Cute-Emoji/${(index+1).toString().padStart(3,"0")}.png`]),};new Valine({el:'#valine_comments',appId:'THSEEUpmt73ioQLUO7dO6sI8-9Nh9j0Va',appKey:'2ko493HrmEBiJ5FFTpPnnrWg',avatar:'robohash',visitor:true,recordIP:true,enableQQ:true,emojiCDN:'https://cdn.jsdelivr.net/gh/GamerNoTitle/ValineCDN@master/',emojiMaps:Object.assign({},...Object.keys(emojis).map(name=>emojis[name])),});})();</script></div></section><div class="sidebar s1"><a class=sidebar-toggle title="Expand Sidebar"><i class="fas fa-angle-right"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>Catalog</p></div><div class=toc><div id=page-scrollspy class=toc-nav><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#%e9%a2%84%e6%9c%9f title=é¢„æœŸ>é¢„æœŸ</a></li></ul></ul><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#%e5%8e%9f%e7%90%86 title=åŸç†>åŸç†</a></li></ul></ul><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#%e5%89%8d%e7%bc%80%e6%a0%91-trie-%e7%ae%97%e6%b3%95 title="å‰ç¼€æ ‘ (Trie) ç®—æ³•">å‰ç¼€æ ‘ (Trie) ç®—æ³•</a></li></ul></ul><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#%e5%ae%9e%e7%8e%b0 title=å®ç°>å®ç°</a></li></ul></ul><ul class=nav-tabs><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#node title=Node>Node</a></li></ul></ul></ul><ul class=nav-tabs><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#trie title=Trie>Trie</a></li></ul></ul></ul><ul class=nav-tabs><ul class=nav-tabs><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#addrouter title=addRouter>addRouter</a></li></ul></ul></ul></ul><ul class=nav-tabs><ul class=nav-tabs><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#getrouter title=getRouter>getRouter</a></li></ul></ul></ul></ul><ul class=nav-tabs><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#kori title=Kori>Kori</a></li></ul></ul></ul><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#%e5%85%b6%e4%bb%96 title=å…¶ä»–>å…¶ä»–</a></li></ul></ul><ul class=nav-tabs><ul class=nav-tabs><li class=toc-nav-item><a class="toc-nav-link text-left" href=https://blog.acdzh.ltd/tec/2020-08/kori/#%e5%8e%86%e5%8f%b2%e8%ae%b0%e5%bd%95 title=å†å²è®°å½•>å†å²è®°å½•</a></li></ul></ul></div><script>$("#page-scrollspy a.toc-nav-link").on('click',function(){const navbarHeight=50;const scollOnePageTime=300;let target=decodeURI(this.hash.replace(/^#/,''));let scrollLength=$(":header[id='"+target+"']").offset().top-navbarHeight-50;let scrollTime=Math.max(Math.min(scrollLength*scollOnePageTime/window.innerHeight,800),300);$('html,body').animate({scrollTop:scrollLength},scrollTime);return false;});</script></div><ul class="post-nav group"><li class=next></li><li class=previous><a href=https://blog.acdzh.ltd/tec/2020-07/koa_begining/ rel=prev><i class="fas fa-chevron-left"></i><strong>Previous Post</strong>
<span>Koa å…¥é—¨</span></a></li></ul><div id=search-2 class="widget widget_search"><h3>Search</h3><form method=get class="searchform themeform" action=https://www.google.com/search><div><input type=text class=search name=q placeholder="Press enter to start searching"></div></form></div></div></div><div class="sidebar s2"><a class=sidebar-toggle title="Expand Sidebar"><i class="fas fa-angle-left"></i></a><div class=sidebar-content><div class="sidebar-top group"><p>More</p></div><div id=categories-2 class="widget widget_categories"><h3><a rel=nofollow href=https://blog.acdzh.ltd/categories/><i class="fas fa-folder-open"></i>&nbsp;Categories</a></h3><ul><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/CSharp/>CSharp (6)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/Golang/>Golang (2)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/JavaScript/>JavaScript (2)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/Python/>Python (2)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/Windows/>Windows (9)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E5%89%8D%E7%AB%AF/>å‰ç«¯ (3)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/>åµŒå…¥å¼å¼€å‘ (4)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E6%8A%80%E6%9C%AF/>æŠ€æœ¯ (26)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E7%88%AC%E8%99%AB/>çˆ¬è™« (2)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E7%A1%AC%E4%BB%B6/>ç¡¬ä»¶ (1)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E7%AE%97%E6%B3%95/>ç®—æ³• (3)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/>è½¯ä»¶å·¥ç¨‹ (4)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/categories/%E9%97%B2%E8%AF%9D/>é—²è¯ (2)</a></li></ul></div><div id=series-2 class="widget widget_categories"><h3><a rel=nofollow href=https://blog.acdzh.ltd/series/><i class="fas fa-bookmark"></i>&nbsp;Series</a></h3><ul><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/series/Github-Organizations-%E6%8B%BC%E5%9B%BE/>Github-Organizations-æ‹¼å›¾ (2)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/series/LeetCode-with-Golang/>LeetCode-with-Golang (2)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/series/UEFI-%E5%8E%9F%E7%90%86%E4%B8%8E%E7%BC%96%E7%A8%8B/>UEFI-åŸç†ä¸ç¼–ç¨‹ (4)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/series/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84-.Net-Shell-%E6%89%A9%E5%B1%95%E6%95%99%E7%A8%8B/>ä»é›¶å¼€å§‹çš„-.Net-Shell-æ‰©å±•æ•™ç¨‹ (6)</a></li><li class="cat-item cat-item-1"><a rel=nofollow href=https://blog.acdzh.ltd/series/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E7%BB%8F%E6%B5%8E%E5%AD%A6%E7%AC%94%E8%AE%B0/>è½¯ä»¶å·¥ç¨‹ç»æµå­¦ç¬”è®° (4)</a></li></ul><style>#series-2>ul>li a:before{content:'\f02e'}</style></div><div id=tags-2 class=widget><h3><a rel=nofollow href=https://blog.acdzh.ltd/tags/><i class="fas fa-tags"></i>&nbsp;tags</a></h3><p class=post-tags><a href=tags/CSharp><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>CSharp</a>
<a href=tags/EDK2><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>EDK2</a>
<a href=tags/Express><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Express</a>
<a href=tags/Github><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Github</a>
<a href=tags/Golang><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Golang</a>
<a href=tags/Hyper-V><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Hyper-V</a>
<a href=tags/IEEE-1588><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>IEEE-1588</a>
<a href=tags/JavaScript><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>JavaScript</a>
<a href=tags/KOA><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>KOA</a>
<a href=tags/Kori><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Kori</a>
<a href=tags/LeetCode><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>LeetCode</a>
<a href=tags/Leetcode><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Leetcode</a>
<a href=tags/PIL><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>PIL</a>
<a href=tags/PTP><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>PTP</a>
<a href=tags/Python><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Python</a>
<a href=tags/SharpShell><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>SharpShell</a>
<a href=tags/UEFI><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>UEFI</a>
<a href=tags/Wallpaper-Engine><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Wallpaper-Engine</a>
<a href=tags/Windows><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Windows</a>
<a href=tags/Windows-Shell><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>Windows-Shell</a>
<a href=tags/blog><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>blog</a>
<a href=tags/npm><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>npm</a>
<a href=tags/%E5%B5%8C%E5%85%A5%E5%BC%8F><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>åµŒå…¥å¼</a>
<a href=tags/%E7%88%AC%E8%99%AB><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>çˆ¬è™«</a>
<a href=tags/%E7%A1%AC%E4%BB%B6><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>ç¡¬ä»¶</a>
<a href=tags/%E7%AC%94%E8%AE%B0><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>ç¬”è®°</a>
<a href=tags/%E7%BB%8F%E6%B5%8E%E5%AD%A6><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>ç»æµå­¦</a>
<a href=tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>ç¼–è¯‘åŸç†</a>
<a href=tags/%E8%AE%BA%E6%96%87><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>è®ºæ–‡</a>
<a href=tags/%E8%AF%BE%E7%A8%8B><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>è¯¾ç¨‹</a>
<a href=tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B><i class="fas fa-tag" style="color:#ccc;margin:0 6px 0 -6px"></i>è½¯ä»¶å·¥ç¨‹</a></p></div></div></div></div></div></div></div><footer id=footer><section class=container id=footer-bottom><div class=container-inner><a id=back-to-top href=#><i class="fas fa-angle-up"></i></a><div class="pad group"><div class="grid one-half"><div id=copyright style=font-size:1.1rem><p>Copyright (c) 2020. All rights reserved.<p style=margin-top:8px>Power by
<a rel=nofollow href=http://gohugo.io/ target=_blank>Hugo 0.73.0</a>,
<a rel=nofollow href=http://golang.org target=_blank>Golang</a>.
Theme <a rel=nofolloe href=https://github.com/acdzh/hugo-theme-rapid target=_blank>rapid</a>.</p></p></div></div><div class="grid one-half last"><div id=social-links><a href=//github.com/acdzh/ target=_blank rel=noopener title="fork me on github"><i class="fab fa-github" aria-disabled></i></a><a href=//steamcommunity.com/id/acdzh/ target=_blank rel=noopener title="play games with me"><i class="fab fa-steam" aria-disabled></i></a><a href=mailto:acdzh@outlook.com target=_blank rel=noopener title=Mail><i class="far fa-envelope" aria-disabled></i></a><a href="tencent://message/?uin=57082212&Site=1069436872&Menu=yes" target=_blank rel=noopener title=QQ><i class="fab fa-qq" aria-disabled></i></a><a href=//zhihu.com/people/kkkk-zzzz-13 target=_blank rel=noopener title=çŸ¥ä¹><i class="fab fa-zhihu" aria-disabled></i></a><div style=font-size:1.1rem;margin-top:10px><a href=//zhuanlan.zhihu.com/c_1159869906471759872 target=_blank rel=noopener title=çŸ¥ä¹ä¸“æ >zhuanlan</a>
<a href=//cnblogs.com/acdzh target=_blank rel=noopener title=åšå®¢å›­>cnblogs</a></div></div><style>#social-links{text-align:right;font-size:1.5rem;color:#fff}@media only screen and (max-width:719px){#social-links{margin-top:10px;text-align:center}}</style></div></div></div></section></footer></div></body></html>